---
title: åŸºç¡€é€ŸæŸ¥è¡¨
sidebar_position: 3
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Solana åŸºç¡€é€ŸæŸ¥è¡¨

## è´¦æˆ·

![](./img/Accounts.png)

### ğŸ¤“ å®šä¹‰

è´¦æˆ·æ˜¯å­˜å‚¨åœ¨SolanaåŒºå—é“¾ä¸Šçš„æ•°æ®ã€‚

### ğŸ“é‡ç‚¹

- è´¦æˆ·ç”¨äºå­˜å‚¨æ•°æ®ã€‚
- æ¯ä¸ªè´¦æˆ·éƒ½æœ‰ä¸€ä¸ªç‹¬ç‰¹çš„åœ°å€ã€‚
- æ¯ä¸ªè´¦æˆ·çš„æœ€å¤§å¤§å°ä¸º10MBï¼ˆ10å…†å­—èŠ‚ï¼‰ã€‚
- è´¦æˆ·å¤§å°åœ¨åˆ›å»ºæ—¶å›ºå®šï¼Œä½†å¯ä»¥ä½¿ç”¨`realloc`è¿›è¡Œè°ƒæ•´ï¼ˆåœ¨æœ‰ç”¨é“¾æ¥ä¸­äº†è§£æ›´å¤šä¿¡æ¯ï¼‰ã€‚
- ç§Ÿé‡‘æ”¯ä»˜è´¦æˆ·æ•°æ®å­˜å‚¨è´¹ç”¨ã€‚
- ç³»ç»Ÿç¨‹åºé»˜è®¤æ‹¥æœ‰è¯¥è´¦æˆ·ã€‚

### è´¦æˆ·ç±»å‹

SolanaåŒºå—é“¾ä¸Šæœ‰ä¸¤ç§ç±»å‹çš„è´¦æˆ·ï¼šå¯æ‰§è¡Œè´¦æˆ·å’Œéå¯æ‰§è¡Œè´¦æˆ·ã€‚ç¨‹åºæ˜¯å¯æ‰§è¡Œè´¦æˆ·ï¼Œå­˜å‚¨ç€ç¨‹åºçš„ä¸å¯å˜ä»£ç ã€‚ç¨‹åºçš„ä»£ç é¦–å…ˆç”¨Rustæˆ–C/C++ç¼–å†™ï¼Œç„¶åé€šè¿‡[LLVMç¼–è¯‘å™¨](https://llvm.org/)åŸºç¡€è®¾æ–½ç¼–è¯‘æˆå­—èŠ‚ç ã€‚

æ•°æ®å­˜å‚¨å’Œä»£å¸ä½™é¢å­˜å‚¨åœ¨éå¯æ‰§è¡Œè´¦æˆ·ä¸­ï¼Œå› ä¸ºå®ƒä»¬çš„æ•°æ®å¯ä»¥è¢«æ›´æ”¹ã€‚ä¸ºäº†æ§åˆ¶è°å¯ä»¥æ›´æ”¹è¿™äº›æ•°æ®ï¼Œéå¯æ‰§è¡Œè´¦æˆ·è¢«åˆ†é…äº†ä¸€ä¸ªæ‰€æœ‰è€…ç¨‹åºåœ°å€ã€‚å…¶ä»–ç¨‹åºå¯ä»¥è¯»å–å¦ä¸€ä¸ªè´¦æˆ·çš„æ•°æ®ï¼Œä½†å¦‚æœå®ƒä»¬è¯•å›¾ä¿®æ”¹è¯¥æ•°æ®ï¼Œäº¤æ˜“å°†å¤±è´¥ã€‚

![](./img/solana-account-types.png)

- ç¨‹åºè´¦æˆ· - è¿™äº›è´¦æˆ·å­˜å‚¨å¯æ‰§è¡Œä»£ç å’Œä»¥å¤ªåŠæ™ºèƒ½åˆçº¦çš„ç­‰ä»·ç‰©ã€‚
- å­˜å‚¨è´¦æˆ· - è¿™äº›è´¦æˆ·å­˜å‚¨ä¸ç¨‹åºç›¸å…³çš„æ•°æ®ã€‚
- ä»¤ç‰Œè´¦æˆ· - è¿™äº›è´¦æˆ·è·Ÿè¸ªä»¤ç‰Œçš„è´¦æˆ·ä½™é¢ï¼Œå¹¶å…è®¸åœ¨è´¦æˆ·ä¹‹é—´è¿›è¡Œä»¤ç‰Œçš„è½¬ç§»æˆ–æ¥æ”¶ã€‚

### ç¨‹åºæ´¾ç”Ÿåœ°å€ï¼ˆPDAsï¼‰

è¿˜æœ‰ä¸€ç§é¢å¤–çš„ç¨‹åºæ‹¥æœ‰è´¦æˆ·â€”â€”ç¨‹åºæ´¾ç”Ÿè´¦æˆ·ï¼Œç”¨äºå­˜å‚¨ç‰¹å®šç¨‹åºçš„æ•°æ®ã€‚å®ƒä»¬éµå¾ªéå¯æ‰§è¡Œè´¦æˆ·çš„è§„åˆ™ï¼Œå› æ­¤å®ƒä»¬æœ‰æ‰€æœ‰è€…ï¼Œä½†æ²¡æœ‰ç›¸åº”çš„å¯†é’¥å¯¹ï¼Œåªæœ‰åˆ›å»ºPDAçš„`program_id`æ‰èƒ½ç­¾ç½²äº¤æ˜“ä»¥ä¿®æ”¹å…¶æ•°æ®ã€‚å½“æ‚¨éœ€è¦åªèƒ½ç”±æ‚¨çš„ç¨‹åºä¿®æ”¹çš„å­˜å‚¨æ—¶ï¼Œè¿™éå¸¸æœ‰ç”¨ã€‚

### å…³è”ä»£å¸è´¦æˆ·ï¼ˆATAsï¼‰

åœ¨Solanaä¸­ï¼Œåªæœ‰ä¸€ä¸ª[Tokenç¨‹åº](https://spl.solana.com/token)ï¼Œå®ƒå¤„ç†åˆ›å»ºæ–°çš„ä»¤ç‰Œï¼Œè¿™äº›ä»¤ç‰Œä¸è®¸å¤šå…¶ä»–é“¾ä¸åŒï¼Œä¸æ˜¯å¯æ‰§è¡Œçš„ï¼Œåªæ˜¯å­˜å‚¨ä¸ä»¤ç‰Œå…ƒæ•°æ®ã€‚å› æ­¤ï¼ŒPDAçš„ä¸€ä¸ªæœ€é‡è¦çš„ä¾‹å­æ˜¯æ‰€è°“çš„[å…³è”ä»¤ç‰Œè´¦æˆ·ATA](https://spl.solana.com/associated-token-account)ã€‚è¿™äº›è´¦æˆ·ç”¨äºå­˜å‚¨ç”¨æˆ·å¯¹å…·ä½“SPLä»¤ç‰Œï¼ˆä»¤ç‰Œé“¸é€ ï¼‰çš„ä½™é¢ã€‚æ¢å¥è¯è¯´ï¼Œç»™å®šé’±åŒ…åœ°å€çš„ATAåªæ˜¯ä¸€ä¸ªç”±é’±åŒ…åœ°å€æœ¬èº«å’Œä»¤ç‰Œé“¸é€ ç»„æˆçš„ç¨‹åºæ´¾ç”Ÿè´¦æˆ·ã€‚


### ç§Ÿèµ

ä¸å¹¸çš„æ˜¯ï¼Œå°†æ‰€æœ‰è¿™äº›æ•°æ®å­˜å‚¨åˆ°å•ç‹¬çš„è´¦æˆ·ä¸­æ˜¯éœ€è¦ä»˜è´¹çš„ã€‚å¹¸è¿çš„æ˜¯ï¼Œå¯¹äºå¼€å‘è€…æ¥è¯´ï¼Œè¿™äº›è´¹ç”¨è¢«ç§°ä¸ºç§Ÿé‡‘ï¼Œä»¥Lamportsçš„å½¢å¼æ”¯ä»˜ã€‚

:::info
Solanaä¸Šçš„è´¦æˆ·å¯èƒ½å…·æœ‰ç”±æ‰€æœ‰è€…æ§åˆ¶çš„çŠ¶æ€ï¼ˆAccount::dataï¼‰ï¼Œä¸è´¦æˆ·ä½™é¢ï¼ˆAccount::lamportsï¼‰åˆ†å¼€ã€‚ç”±äºç½‘ç»œä¸Šçš„éªŒè¯è€…éœ€è¦åœ¨å†…å­˜ä¸­ç»´æŠ¤æ­¤çŠ¶æ€çš„å·¥ä½œå‰¯æœ¬ï¼Œå› æ­¤ç½‘ç»œå¯¹æ­¤èµ„æºæ¶ˆè€—æ”¶å–åŸºäºæ—¶é—´å’Œç©ºé—´çš„è´¹ç”¨ï¼Œä¹Ÿç§°ä¸ºç§Ÿé‡‘ã€‚

å‘ç°æ›´å¤šï¼š[Solanaæ–‡æ¡£/å·²å®æ–½çš„ææ¡ˆ/ç§Ÿé‡‘](https://docs.solana.com/implemented-proposals/rent)
:::

Lamportsæ˜¯Solanaçš„ä»£å¸ï¼ˆSOLï¼‰çš„ä¸€éƒ¨åˆ†ã€‚å¯ä»¥ä½¿ç”¨å®ƒä»¬åœ¨SolanaåŒºå—é“¾ä¸Šè¿›è¡Œå¾®æ”¯ä»˜ã€‚å­˜å‚¨åœ¨è´¦æˆ·ä¸­çš„æ•°æ®é‡å†³å®šäº†ç§Ÿé‡‘è´¹ç”¨ã€‚å­˜å‚¨çš„æ•°æ®é‡è¶Šå¤§ï¼Œç§Ÿé‡‘è´¹ç”¨è¶Šé«˜ã€‚

ç§Ÿé‡‘åœ¨ä¸¤ä¸ªä¸åŒçš„æ—¶é—´æ”¯ä»˜ï¼šå½“äº¤æ˜“å¼•ç”¨æ—¶æˆ–è€…ä¸€ä¸ªæ—¶æœŸç»“æŸæ—¶æ”¯ä»˜ã€‚

ç§Ÿé‡‘è´¹ç”¨åœ¨SolanaåŒºå—é“¾çš„æ¯ä¸ªæ—¶æœŸç»“æŸæ—¶æ”¶å–ã€‚ä¸€ä¸ªæ—¶æœŸæ˜¯æŒ‡é¢†å…ˆçš„éªŒè¯è€…ä»ç„¶æœ‰æ•ˆåœ°ç”Ÿæˆäº¤æ˜“å—çš„æ—¶é—´ã€‚æ‚¨å¯ä»¥åœ¨[Solana Explorer](https://explorer.solana.com/)ä¸ŠæŸ¥çœ‹å½“å‰å’Œè¿‡å»çš„æ—¶æœŸæ•°æ®ã€‚

åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œä¸€ä¸ªæ—¶ä»£å¤§çº¦æŒç»­ä¸¤å¤©ã€‚å¦‚æœè´¦æˆ·ä½™é¢ä¸ºé›¶ä¸”æ— æ³•æ”¯ä»˜ç§Ÿé‡‘ï¼ŒåŒºå—é“¾å°†åˆ é™¤è¯¥è´¦æˆ·ã€‚

ä¸€ä¸ªè´¦æˆ·å¯ä»¥é€šè¿‡åœ¨å…¶ä»£å¸ä½™é¢ä¸­æŒæœ‰è‡³å°‘ä¸¤å¹´çš„ç§Ÿé‡‘æ¥å…é™¤ç§Ÿé‡‘ã€‚ä¼°ç®—ç§Ÿé‡‘æˆæœ¬çš„ç®€ä¾¿æ–¹æ³•æ˜¯ä½¿ç”¨Solana CLIä¸­çš„[solana rentå‘½ä»¤](https://docs.solana.com/cli/usage#solana-rent)ã€‚é€šè¿‡æä¾›è´¦æˆ·çš„å¤§å°ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ï¼Œæ‚¨å°†çœ‹åˆ°æ¯å­—èŠ‚çš„ç§Ÿé‡‘ã€æ¯ä¸ªæ—¶æœŸçš„ç§Ÿé‡‘ä»¥åŠè´¦æˆ·å…ç§Ÿæ‰€éœ€çš„æœ€ä½é‡‘é¢ã€‚

é€šè¿‡å…³é—­è´¦æˆ·å¹¶å°†Lamportså‘é€å›é’±åŒ…ï¼Œå¯ä»¥å–å›ç§Ÿé‡‘ã€‚

### å¦‚ä½•åˆ›å»ºä¸€ä¸ªè´¦æˆ·

è¦åœ¨Solanaä¸Šåˆ›å»ºä¸€ä¸ªè´¦æˆ·ï¼Œå®¢æˆ·ç«¯å¿…é¡»ç”Ÿæˆä¸€ä¸ªå¯†é’¥å¯¹ï¼ˆå…¬é’¥å’Œç§é’¥ï¼‰ã€‚ç„¶åï¼Œå®¢æˆ·ç«¯ä½¿ç”¨`SystemProgram::CreateAccount`è°ƒç”¨æ¥æ³¨å†Œå…¬é’¥ï¼Œå¹¶åˆ†é…æ‰€éœ€çš„æ•°æ®å­˜å‚¨å¤§å°ä»¥è®¾ç½®è¯¥è´¦æˆ·ã€‚ç›®å‰ï¼Œè¿™ä¸ªå¤§å°ä¸èƒ½åœ¨åæœŸæ›´æ”¹ï¼Œä¸”å¤§å°é™åˆ¶ä¸º10 MBã€‚å¦‚æœéœ€è¦æ›´å¤šçš„å¤§å°ï¼Œç¨‹åºå¯ä»¥å°†æ•°æ®ä»ä¸€ä¸ªå®¹é‡æ›´å¤§çš„è´¦æˆ·å¤åˆ¶åˆ°å¦ä¸€ä¸ªè´¦æˆ·ã€‚

åˆ›å»ºè´¦æˆ·æ—¶ï¼Œéœ€è¦ä¸ºè´¦æˆ·åˆ†é…ä¸€ä¸ªæ‰€æœ‰è€…ã€‚åªæœ‰è´¦æˆ·çš„æ‰€æœ‰è€…æ‰èƒ½ä¿®æ”¹å­˜å‚¨åœ¨è´¦æˆ·ä¸­çš„æ•°æ®ã€‚è´¦æˆ·åˆ›å»ºåçš„é»˜è®¤æ‰€æœ‰è€…è¢«ç§°ä¸ºâ€œç³»ç»Ÿç¨‹åºâ€ã€‚ç³»ç»Ÿç¨‹åºæ˜¯ä¸€ä¸ªæœ¬åœ°çš„Solanaç¨‹åºï¼Œè´Ÿè´£åˆ›å»ºè´¦æˆ·ã€åˆ†é…è´¦æˆ·ä¸Šçš„æ•°æ®ï¼Œå¹¶å°†è´¦æˆ·çš„æ‰€æœ‰æƒåˆ†é…ç»™è¿æ¥çš„ç¨‹åºã€‚æœ¬åœ°ç¨‹åºæ˜¯æ‰€æœ‰SolanaéªŒè¯è€…å¿…é¡»è¿è¡Œçš„ç¨‹åºã€‚

ç³»ç»Ÿç¨‹åºè¿˜è´Ÿè´£å¤„ç†å…¶æ‰€åˆ†é…ç»™æ‰€æœ‰è€…çš„Lamportè½¬è´¦ã€‚å¦‚æœç”¨æˆ·åˆ›å»ºä¸€ä¸ªç”¨äºå­˜å‚¨ä»£å¸ä½™é¢çš„è´¦æˆ·ï¼Œç³»ç»Ÿç¨‹åºå°†å¤„ç†è¯¥ä»£å¸çš„è½¬è´¦ã€‚ç”¨æˆ·å°†ä½¿ç”¨ç§é’¥ç­¾ç½²è½¬è´¦æŒ‡ä»¤ï¼Œç³»ç»Ÿç¨‹åºå°†å¤„ç†ä»å‘é€æ–¹æ‰£é™¤ä»£å¸å¹¶å°†å…¶å­˜å…¥æ¥æ”¶æ–¹è´¦æˆ·ã€‚

<Tabs>
<TabItem value="rust" label="Rust">

```rust
use solana_client::rpc_client::RpcClient;
use solana_program::system_instruction;
use solana_sdk::commitment_config::CommitmentConfig;
use solana_sdk::native_token::LAMPORTS_PER_SOL;
use solana_sdk::signature::{Keypair, Signer};

fn main() {
    // Create an HTTP RpcClient with specified "confirmed" commitment level
    // "confirmed" - the node will query the most recent block that has been voted on by supermajority of the cluster.
    let rpc_url = String::from("https://api.devnet.solana.com");
    let rpc_client = RpcClient::new_with_commitment(rpc_url, CommitmentConfig::confirmed()));

    // Generate fee payer and new account key pairs
    let fee_payer = Keypair::new();
    let new_account = Keypair::new();

    // Request an airdrop for the fee payer and wait for the transaction to be confirmed
    let request_airdrop_tx_signature = rpc_client
        .request_airdrop(&fee_payer.pubkey(), LAMPORTS_PER_SOL)
        .unwrap();
    loop {
        if let ok(confirmed) = rpc_client.confirm_transaction(&request_airdrop_tx_signature) {
            if confirmed {
                break;
            }
        }
    }

    // Specify account data length
    let space = 0;
    // Get minimum balance required to make an account with specified data length rent exempt
    let rent_exemption_amount = rpc_client
        .get_minimum_balance_for_rent_exemption(space)
        .unwrap();
    // Create instruction to create an account
    let create_account_ix = system_instruction::create_account(
        &fee_payer.pubkey(),
        &new_account.pubkey(),
        rent_exemption_amount,
        space as u64,
        &fee_payer.pubkey(),
    );

    // Get recent blockhash
    let recent_blockhash = rpc_client.get_latest_blockhash().unwrap();
    // Create transaction to create an account
    let create_account_tx = solana_sdk::transaction::Transaction::new_signed_with_payer(
        &[create_account_ix],
        Some(&fee_payer.pubkey()),
        &[&fee_payer, &new_account],
        recent_blockhash,
    );

    // Submit a transaction to create an account and wait for confirmation
    let create_account_tx_signature = rpc_client
        .send_and_confirm_transaction(&create_account_tx)
        .unwrap();

    // Print transaction signature and account address
    println!("Transaction signature: {create_account_tx_signature}");
    println!("New account {} created successfully", new_account.pubkey());
}
```

</TabItem>
<TabItem value="typescript" label="Typescript">

```ts
const createAccountParams = {
  fromPubkey: fromPubkey.publicKey,
  newAccountPubkey: newAccountPubkey.publicKey,
  lamports: rentExemptionAmount,
  space,
  programId: SystemProgram.programId,
};

const createAccountTransaction = new Transaction().add(
  SystemProgram.createAccount(createAccountParams)
);

await sendAndConfirmTransaction(connection, createAccountTransaction, [
  fromPubkey,
  newAccountPubkey,
]);
```

</TabItem>
<TabItem value="py" label="py">

```py
// todo
def hello_world():
  print("Hello, world!")
```

</TabItem>
</Tabs>

### å¦‚ä½•åœ¨Seedä¸Šåˆ›å»ºä¸€ä¸ªè´¦æˆ· ğŸ¤”

è¦åœ¨`seed`ä¸Šåˆ›å»ºä¸€ä¸ªè´¦æˆ·ï¼Œå®¢æˆ·éœ€è¦ç”Ÿæˆä¸€ä¸ªåŸºæœ¬å¯†é’¥å¯¹ï¼ˆå…¬é’¥å’Œç§é’¥ï¼‰ã€‚ç„¶åï¼Œéœ€è¦ä»æŒ‡å®šçš„`seed`å’Œç¨‹åºIDç”Ÿæˆæ´¾ç”Ÿçš„å…¬é’¥ã€‚æ¥ä¸‹æ¥ï¼Œå®¢æˆ·ä½¿ç”¨`SystemProgram::CreateAccountWithSeed`è°ƒç”¨æ¥æ³¨å†Œæ´¾ç”Ÿçš„å…¬é’¥ï¼Œå¹¶åˆ†é…æ‰€éœ€çš„æ•°æ®å­˜å‚¨å¤§å°ä»¥è®¾ç½®è¯¥è´¦æˆ·ã€‚æ‰€æœ‰åç»­æ“ä½œä¸åˆ›å»ºä¸€ä¸ªç”±ç³»ç»Ÿç¨‹åºæ‹¥æœ‰çš„è´¦æˆ·ç±»ä¼¼ã€‚

<Tabs>
<TabItem value="rust" label="Rust">

```rust
use solana_client::rpc_client::RpcClient;
use solana_program::pubkey::Pubkey;
use solana_program::system_instruction;
use solana_sdk::commitment_config::CommitmentConfig;
use solana_sdk::native_token::LAMPORTS_PER_SOL;
use solana_sdk::signature::{Keypair, Signer};

fn main() {
    // Create an HTTP RpcClient with specified "confirmed" commitment level
    // "confirmed" - the node will query the most recent block that has been voted on by supermajority of the cluster.
    let rpc_url = String::from("https://api.devnet.solana.com");

    let rpc_client = RpcClient::new_with_commitment(rpc_url,CommitmentConfig::confirmed());

    // Generate fee payer and base key pairs
    let fee_payer = Keypair::new();
    let base = Keypair::new();

    // Request an airdrop for the fee payer and wait for the transaction to be confirmed
    let request_airdrop_tx_signature = rpc_client
        .request_airdrop(&fee_payer.pubkey(), LAMPORTS_PER_SOL)
        .unwrap();
    loop {
        if let ok(confirmed) = rpc_client.confirm_transaction(&request_airdrop_tx_signature) {
            if confirmed {
                break;
            }
        }
    }

    // Specify seed
    let seed = "seed123";
    // Get system program id
    let program_id = solana_program::system_program::id();

    // Generate derived public key
    let derived_pubkey = Pubkey::create_with_seed(&base.pubkey(), seed, &program_id).unwrap();

    // Specify account data length and number of lamports
    let space = 0;
    let lamports = LAMPORTS_PER_SOL /10;
    // Create instruction to create an account with seed
    let create_account_with_seed_ix = system_instruction::create_account_with_seed(
        &fee_payer.pubkey(),
        &derived_pubkey,
        &base.pubkey(),
        seed,
        lamports,
        space as u64,
        &program_id,
    );

    // Get recent blockhash
    let recent_blockhash = rpc_client.get_latest_blockhash().unwrap();
    // Create transaction to create an account with seed
    let create_account_with_seed_tx = solana_sdk::transaction::Transaction::new_signed_with_payer(
        &[create_account_with_seed_ix],
        Some(&fee_payer.pubkey()),
        &[&fee_payer, &base],]
        recent_blockhash,
    );

    // Submit a transaction to create an account with seec and wait for confirmation
    let create_account_with_seed_tx_signature = rpc_client
        .send_and_confirm_transaction(&create_account_with_seed_tx)
        .unwrap();

    // Print transaction signature and account address
    println!("Transaction signature: {create_account_with_seed_tx_signature}");
    println!("New account {} created with seed successfully",
        derived_pubkey
    );
}

```

</TabItem>
<TabItem value="typescript" label="typescript">

```ts
PublicKey.createWithSeed(basePubkey, seed, programId);

const tx = new Transaction().add(
  SystemProgram.createAccountWithSeed({
    fromPubkey: feePayer.publicKey, // funder
    newAccountPubkey: derived,
    basePubkey: basePubkey,
    seed: seed,
    lamports: 1e8, // 0.1 SOL
    space: 0,
    programId: owner,
  })
);

console.log(
  `txhash: ${await sendAndConfirmTransaction(connection, tx, [feePayer, base])}`
);
```

</TabItem>
<TabItem value="java" label="Java">

```java
class HelloWorld {
  public static void main(String args[]) {
    System.out.println("Hello, World");
  }
}
```

</TabItem>
</Tabs>

### å¦‚ä½•å…³é—­è´¦æˆ· ğŸ¤”

å…³é—­Solanaè´¦æˆ·ï¼ˆåˆ é™¤æ‰€æœ‰å­˜å‚¨çš„æ•°æ®ï¼‰éœ€è¦å…ˆç§»é™¤æ‰€æœ‰å­˜å‚¨çš„SOLã€‚

<Tabs>
<TabItem value="rust" label="Rust">

```rust
use solana_program::{
    account_info::next_account_info, account_info::AccountInfo, entrypoint,
    entrypoint::ProgramResult, pubkey::Pubkey,
};

entrypoint!(process_instruction);

fn process_instruction(
    _program_id: &Pubkey,
    accounts: &[AccountInfo],
    _instruction_data: &[u],
) -> ProgramResult {
    let account_info_iter = &mut accounts.iter();

    // Get source and destination accounts info
    let source_account_info = next_account_info(account_info_iter)?;
    let dest_account_info = next_account_info(account_info_iter)?;

    // Return lamports back to the destination account
    let dest_starting_lamports = dest_account_info.lamports();
    **dest_account_info.lamports.borrow_mut() = dest_starting_lamports
        .checked_add(source_account_info.lamports())
        .unwrap();
    **source_account_info.lamports.borrow_mut() = 0;

    // Remove source account data
    let mut source_data = source_account_info.data.borrow_mut();
    source_data.fill(0);

    ok(())
}
```

```rust
use solana_client::rpc_client::RpcClient;
use solana_program::instruction::{AccountMeta, Instruction};
use solana_program::pubkey::Pubkey;
use solana_program::system_instruction;
use solana_sdk::commitment_config::CommitmentConfig;
use solana_sdk::native_token::LAMPORTS_PER_SOL;
use solana_sdk::signature::{Keypair, Signer};
use std::str::FromStr;

fn main() {
    // Deploy the program and then provide the resulting program ID
    let> program_id = Pubkey::from_str("DRivgExW1MG9PRd4WEZjo4ePtUfjmubgStcXT3Fxwapy").unwrap();

    // Create an HTTP RpcClient with specified "confirmed" commitment level
    // "confirmed" - the node will query the most recent block that has been voted on by supermajority of the cluster.
    let rpc_url = String::from("https://api.devnet.solana.com");

    let rpc_client = RpcClient::new_with_commitment(rpc_url,CommitmentConfig::confirmed());

    // Generate fee payer and new account key pairs/
    let fee_payer = Keypair::new();
    let new_account = Keypair::new();

    // Request an airdrop for the fee payer and wait for the transaction to be confirmed
    let request_airdrop_tx_signature = rpc_client
        .request_airdrop(&fee_payer.pubkey(), LAMPORTS_PER_SOL)
        .unwrap();
    loop {
        if let Ok(confirmed) = rpc_client.confirm_transaction(&request_airdrop_tx_signature) {
            if confirmed {
                break;
            }
        }
    }

    // Specify account data length
    let space = 0;

    // Get minimum balance required to make an account with specified data length rent exempt
    let rent_exemption_amount = rpc_client
        .get_minimum_balance_for_rent_exemption(space)
        .unwrap();
    // Create instruction to create an account (NOTE: account owner must be program id, so in the future we can close account)
    let create_account_ix = system_instruction::create_account(
        &fee_payer.pubkey(),
        &new_account.pubkey(),
        rent_exemption_amount,
        space as u64,
        &program_id,
    );

    / Get recent blockhash/
    let recent_blockhash = rpc_client.get_latest_blockhash().unwrap();
    // Create transaction to create an account
    let create_account_tx = solana_sdk::transaction::Transaction::new_signed_with_payer(
        &[create_account_ix],
        Some(&fee_payer.pubkey()),
        &[&fee_payer, &new_account],
        recent_blockhash,
    );

    // Submit a transaction to create an account and wait for confirmation
    let create_account_tx_signature = rpc_client
        .send_and_confirm_transaction(&create_account_tx)
        .unwrap();

    // Print transaction signature and account address
    println!("Transaction signature: {create_account_tx_signature}");
    println!("New account {} created successfully", new_account.pubkey());

    // Create instruction to close an account with provided two accounts:span>
    // 1. Account to be closed (writable, not signer)
    // 2. Fee payed account (writable, not signer)
    // NOTE:  As the default AccountMeta::new constructor creates writable accounts,
    //        use AccountMeta::new_readonly to specify that an account is not writable.
    // On chain program does not expect any instruction_data, so the instruction data field contains empty vector
    let close_account_ix = Instruction {
        program_id,
        accounts: vec![
            AccountMeta::new(new_account.pubkey(), false),
            AccountMeta::new(fee_payer.pubkey(), false),
        ],
        data: vec![],
    };

    // Get recent blockhash
    let recent_blockhash = rpc_client.get_latest_blockhash().unwrap();
    // Create transaction to close an account
    let close_account_tx = solana_sdk::transaction::Transaction::new_signed_with_payer(
        &[close_account_ix],
        Some(&fee_payer.pubkey()),
        &[&fee_payer],
        recent_blockhash,
    );

    // Submit a transaction to close an account and wait for confirmation
    let close_account_tx_signature = rpc_client
        .send_and_confirm_transaction(&close_account_tx)
        .unwrap();

    // Print transaction signature and account address
    println!("Transaction signature: {close_account_tx_signature}");
    println!("New account {} closed successfully", new_account.pubkey());
}
```

</TabItem>
<TabItem value="py" label="Python">

```py
def hello_world():
  print("Hello, world!")
```

</TabItem>
<TabItem value="java" label="Java">

```java
class HelloWorld {
  public static void main(String args[]) {
    System.out.println("Hello, World");
  }
}
```

</TabItem>
</Tabs>

### é“¾ä¸Šè´¦æˆ·æ•°æ®

![](./img/on-chain-account-data.png)

æ¯ä¸ªè´¦æˆ·å…ƒç´ éƒ½æ˜¯ä¸€ä¸ªå…ƒæ•°æ®é›†ï¼Œå› æ­¤åè®®å¯ä»¥è½»æ¾ç†è§£è´¦æˆ·çš„ç±»å‹å’Œé™„åŠ ä¿¡æ¯ã€‚å…ƒæ•°æ®åŒ…æ‹¬ğŸ‘‡ï¼š

- `lamports` - è´¦æˆ·çš„SOLä½™é¢ï¼Œä»¥lamportsä¸ºå•ä½ï¼Œå…¶ä¸­1 SOL = 1000_000_000 lamportsã€‚
- `owner` - è¿™æ˜¯æ‹¥æœ‰è¯¥è´¦æˆ·çš„ç¨‹åºçš„åœ°å€ã€‚
- `executable` - ä¸€ä¸ªå¸ƒå°”å˜é‡ï¼Œè¡¨ç¤ºè´¦æˆ·æ˜¯å¦åŒ…å«å¯æ‰§è¡Œä»£ç ã€‚
- `data` - å­˜å‚¨åœ¨è´¦æˆ·ä¸­çš„åŸå§‹æ•°æ®å­—èŠ‚æ•°ç»„ï¼Œæ— è®ºæ˜¯å­˜å‚¨å˜é‡è¿˜æ˜¯å¯æ‰§è¡Œä»£ç ã€‚
- `rent_epoch` - è¡¨ç¤ºè´¦æˆ·å°†æ¬ ç§Ÿçš„ä¸‹ä¸€ä¸ªæ—¶æœŸã€‚

## ç­¾ç½²äººå’Œæ‰€æœ‰è€…

### ç­¾ç½²è€…

æ¯ä¸ªäº¤æ˜“éƒ½æ˜ç¡®åˆ—å‡ºäº†äº¤æ˜“æŒ‡ä»¤ä¸­å¼•ç”¨çš„æ‰€æœ‰è´¦æˆ·å…¬é’¥ã€‚å…¶ä¸­çš„ä¸€éƒ¨åˆ†å…¬é’¥éƒ½é™„å¸¦æœ‰äº¤æ˜“ç­¾åã€‚è¿™äº›ç­¾åå‘é“¾ä¸Šç¨‹åºå‘å‡ºä¿¡å·ï¼Œè¡¨æ˜è´¦æˆ·æŒæœ‰äººå·²ç»æˆæƒè¯¥äº¤æ˜“ã€‚é€šå¸¸ï¼Œç¨‹åºä¼šä½¿ç”¨æˆæƒæ¥å…è®¸ä»è´¦æˆ·ä¸­æ‰£æ¬¾æˆ–ä¿®æ”¹å…¶æ•°æ®ã€‚

äº¤æ˜“åŒ…æ‹¬ä¸€ä¸ªæˆ–å¤šä¸ªæ•°å­—ç­¾åï¼Œæ¯ä¸ªæ•°å­—ç­¾åå¯¹åº”äºäº¤æ˜“å¼•ç”¨çš„è´¦æˆ·åœ°å€

:::info
**ç­¾å**
ä¸€ä¸ªç”±Rï¼ˆ32å­—èŠ‚ï¼‰å’ŒSï¼ˆ32å­—èŠ‚ï¼‰ç»„æˆçš„64å­—èŠ‚ed25519ç­¾åã€‚è¦æ±‚Ræ˜¯ä¸€ä¸ªéå°é˜¶çš„æ‰“åŒ…Edwardsç‚¹ï¼Œè€ŒSæ˜¯åœ¨`0 <= S < L`çš„èŒƒå›´å†…çš„æ ‡é‡ã€‚è¿™ä¸ªè¦æ±‚ç¡®ä¿äº†æ²¡æœ‰ç­¾åå¯å¡‘æ€§ã€‚æ¯ä¸ªäº¤æ˜“å¿…é¡»è‡³å°‘æœ‰ä¸€ä¸ªç”¨äºè´¹ç”¨è´¦æˆ·çš„ç­¾åã€‚å› æ­¤ï¼Œäº¤æ˜“ä¸­çš„ç¬¬ä¸€ä¸ªç­¾åå¯ä»¥è¢«è§†ä¸ºäº¤æ˜“IDã€‚

äº†è§£æ›´å¤šï¼š[Solanaæ–‡ä»¶/æœ¯è¯­](https://docs.solana.com/terminology#signature)
:::

è¿™äº›åœ°å€ä¸­çš„æ¯ä¸€ä¸ªéƒ½å¿…é¡»æ˜¯ä¸€ä¸ª`ed25519`å¯†é’¥å¯¹çš„å…¬é’¥ï¼Œè€Œç­¾ååˆ™è¡¨ç¤ºæŒæœ‰ç›¸åº”ç§é’¥çš„äººç­¾ç½²å¹¶å› æ­¤â€œæˆæƒâ€äº†è¯¥äº¤æ˜“ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯¥è´¦æˆ·è¢«ç§°ä¸ºç­¾ç½²è€…ã€‚è´¦æˆ·æ˜¯å¦æ˜¯ç­¾ç½²è€…æ˜¯é€šè¿‡è´¦æˆ·çš„å…ƒæ•°æ®æ¥ä¼ è¾¾ç»™ç¨‹åºçš„ã€‚ç¨‹åºå¯ä»¥åˆ©ç”¨è¿™äº›ä¿¡æ¯æ¥åšå‡ºæƒé™å†³ç­–ã€‚


### æ‰€æœ‰æƒå’Œç¨‹åºçš„è½¬è®©

åœ¨Solanaä¸­ï¼Œæ‹¥æœ‰è´¦æˆ·ç§é’¥çš„äººè¢«ç§°ä¸ºæˆæƒè€…ã€‚æˆæƒè€…å¯ä»¥æˆäºˆè´¦æˆ·æ‰€æœ‰æƒã€‚

ğŸ“Owner æŒ‡çš„æ˜¯èƒ½å¤Ÿä¿®æ”¹è´¦æˆ·æ•°æ®çš„ç¨‹åºã€‚Solana ä¸­çš„æ¯ä¸ªè´¦æˆ·éƒ½æœ‰ä¸€ä¸ªæ‰€æœ‰è€…ã€‚åˆ›å»ºçš„è´¦æˆ·è¢«åˆå§‹åŒ–ä¸ºç”±ä¸€ä¸ªåä¸ºç³»ç»Ÿç¨‹åºçš„å†…ç½®ç¨‹åºæ‹¥æœ‰ï¼Œå¹¶è¢«ç§°ä¸ºç³»ç»Ÿè´¦æˆ·ã€‚å¦‚æœè´¦æˆ·çš„ ID ä¸æ‰€æœ‰è€…åŒ¹é…ï¼Œè¿è¡Œæ—¶ä¼šæˆäºˆè¯¥ç¨‹åºå¯¹è´¦æˆ·çš„å†™å…¥æƒé™ã€‚å¯¹äºç³»ç»Ÿç¨‹åºçš„æƒ…å†µï¼Œè¿è¡Œæ—¶å…è®¸å®¢æˆ·ç«¯è½¬ç§» lamportsï¼Œå¹¶ä¸”é‡è¦çš„æ˜¯å¯ä»¥åˆ†é…è´¦æˆ·æ‰€æœ‰æƒï¼Œå³å°†æ‰€æœ‰è€…æ›´æ”¹ä¸ºä¸åŒçš„ç¨‹åº IDã€‚å¦‚æœä¸€ä¸ªè´¦æˆ·æ²¡æœ‰è¢«ä»»ä½•ç¨‹åºæ‹¥æœ‰ï¼Œé‚£ä¹ˆè¯¥ç¨‹åºåªè¢«å…è®¸è¯»å–å…¶æ•°æ®å¹¶å‘è´¦æˆ·å­˜å…¥èµ„é‡‘ã€‚

æœ‰å‡ ä¸ªé‡è¦çš„æ‰€æœ‰æƒè§„åˆ™ğŸ‘‰ï¼š

![](./img/account-rules.png)

Solanaçš„å®‰å…¨æ¨¡å‹å¼ºåˆ¶è¦æ±‚åªæœ‰è´¦æˆ·çš„Ownerç¨‹åºæ‰èƒ½ä¿®æ”¹è´¦æˆ·çš„æ•°æ®ã€‚è¿™ä½¿å¾—ç¨‹åºå¯ä»¥ç›¸ä¿¡æ•°æ®æ˜¯é€šè¿‡å®ƒä»¬æ‹¥æœ‰çš„è´¦æˆ·ä¼ é€’ç»™å®ƒä»¬çš„ã€‚è¿è¡Œæ—¶é€šè¿‡æ‹’ç»ä»»ä½•åŒ…å«è¯•å›¾å‘éè‡ªæœ‰è´¦æˆ·å†™å…¥æ•°æ®çš„ç¨‹åºçš„äº¤æ˜“æ¥å¼ºåˆ¶æ‰§è¡Œè¿™ä¸€è§„å®šã€‚

## ç¨‹åºæ´¾ç”Ÿåœ°å€ï¼ˆPDAsï¼‰

### æ¦‚è¿°

Solanaè´¦æˆ·æœ‰10Mbçš„è´¦æˆ·å¤§å°é™åˆ¶ï¼›è¿Ÿæ—©ä½ ä¼šåœ¨ç”¨æˆ·æ•°æ®ä¸Šè¾¾åˆ°è¿™ä¸ªé™åˆ¶ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œsolana-sdkæä¾›äº†ä¸€ç§å°†ç”¨æˆ·æ•°æ®å­˜å‚¨åœ¨å°å‹çš„ç”±ç”¨æˆ·ç”Ÿæˆçš„è´¦æˆ·ä¸Šçš„æ–¹æ³•ï¼Œç§°ä¸ºç¨‹åºæ´¾ç”Ÿè´¦æˆ·ï¼ˆPDAï¼‰ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶è§†ä¸ºä¸€ç§ç”±ä¸Pubkeyç›¸åŒæ ¼å¼çš„å­—ç¬¦ä¸²æ ‡è¯†çš„è´¦æˆ·ï¼Œä½†æ²¡æœ‰ç›¸åº”çš„ç§é’¥ã€‚ç®€è€Œè¨€ä¹‹ï¼ŒPDAsæ˜¯åªæœ‰ç¨‹åºï¼ˆprogram_idï¼‰æœ‰æƒç­¾åçš„è´¦æˆ·å¯†é’¥ã€‚


:::info
private key

ä¸€ä¸ªç¨‹åºåœ°å€ä¸åœ¨ed25519æ›²çº¿ä¸Šï¼Œå› æ­¤å®ƒæ²¡æœ‰ä¸ä¹‹å…³è”çš„æœ‰æ•ˆç§é’¥ï¼Œå› æ­¤æ— æ³•ä¸ºå…¶ç”Ÿæˆç­¾åã€‚è™½ç„¶å®ƒæ²¡æœ‰è‡ªå·±çš„ç§é’¥ï¼Œä½†ç¨‹åºå¯ä»¥ä½¿ç”¨å®ƒæ¥å‘å‡ºåŒ…å«ç¨‹åºåœ°å€ä½œä¸ºç­¾åè€…çš„æŒ‡ä»¤ã€‚

äº†è§£æ›´å¤šï¼š[Solanaæ–‡æ¡£/å¼€å‘/ç¼–ç¨‹æ¨¡å‹/ç¨‹åºé—´è°ƒç”¨](https://docs.solana.com/developing/programming-model/calling-between-programs#private-keys-for-program-addresses)
:::

### å…³é”®è¦ç‚¹

- PDAæ˜¯32å­—èŠ‚çš„å­—ç¬¦ä¸²ï¼Œçœ‹èµ·æ¥åƒå…¬é’¥ï¼Œä½†æ²¡æœ‰ç›¸åº”çš„ç§é’¥ã€‚
- `findProgramAddress`å°†ä»`programId`å’Œ`seeds`ï¼ˆå­—èŠ‚é›†åˆï¼‰ç¡®å®šæ€§åœ°æ´¾ç”Ÿå‡ºä¸€ä¸ªPDAã€‚
- ä½¿ç”¨ä¸€ä¸ªå­—èŠ‚çš„â€œbumpâ€å°†ä¸€ä¸ªæ½œåœ¨çš„PDAä»ed25519æ¤­åœ†æ›²çº¿ä¸Šæ¨å¼€
- ç¨‹åºå¯ä»¥é€šè¿‡æä¾›ç§å­å’Œç¢°æ’æ¥ä¸ºå…¶PDAç­¾åï¼Œä»¥è°ƒç”¨`invoke_signed`ï¼ˆåœ¨æœ‰ç”¨é“¾æ¥ä¸­äº†è§£æ›´å¤šä¿¡æ¯ï¼‰
- PDAåªèƒ½ç”±å…¶è¡ç”Ÿçš„ç¨‹åºè¿›è¡Œç­¾åã€‚
- é™¤äº†å…è®¸ç¨‹åºä¸ºä¸åŒçš„æŒ‡ä»¤ç­¾åå¤–ï¼ŒPDAè¿˜æä¾›äº†ç±»ä¼¼å“ˆå¸Œæ˜ å°„çš„æ¥å£æ¥[ç´¢å¼•è´¦æˆ·](https://creatorsdao.github.io/all-in-one-solana/cookbook-zh/guides/account-maps)ã€‚

### è‰¯å¥½çš„å®è·µ

æ‚¨å¯ä»¥éµå¾ªä»¥ä¸‹å…³äºä½¿ç”¨PDAçš„å»ºè®®ğŸ‘‰ï¼š

- åœ¨éœ€è¦å­˜å‚¨ç”¨æˆ·æ•°æ®æ—¶ï¼Œå§‹ç»ˆä½¿ç”¨PDAï¼Œè€Œä¸æ˜¯å°†å…¶å­˜å‚¨åœ¨ç¨‹åºå­˜å‚¨å™¨ä¸Šã€‚
- é€šè¿‡ä½¿ç”¨`find_program_address`é‡æ–°ç”Ÿæˆç»™å®šçš„PDAåœ°å€æ¥éªŒè¯å®ƒã€‚å¦‚æœæ‚¨çš„ç¨‹åºéœ€è¦å°½å¯èƒ½å°‘åœ°ä½¿ç”¨gasï¼Œæ‚¨å¯ä»¥å°†`find_program_address`ä¿ç•™åœ¨å®¢æˆ·ç«¯ï¼Œå¹¶ä»…éªŒè¯è¯¥è´¦æˆ·å°šæœªåˆ›å»ºæˆ–åˆå§‹åŒ–ã€‚
- ä½¿ç”¨æ‰€æœ‰ç›¸å…³è´¦æˆ·æ¥ä¸º`find_program_address`å‡½æ•°æä¾›ä¸€ä¸ªç§å­ï¼Œå¹¶ä½¿ç”¨æšä¸¾æ¥ç”Ÿæˆç§å­ï¼Œä»¥é¿å…ç§å­ä¹‹é—´çš„å†²çªã€‚

### å¦‚ä½•åˆ›å»ºPDAè´¦æˆ·


:::caution
ğŸ“Œæ³¨æ„ï¼šPDAè´¦æˆ·åªèƒ½åœ¨è¯¥ç¨‹åºä¸Šåˆ›å»ºã€‚åœ°å€å¯ä»¥åœ¨å®¢æˆ·ç«¯ç”Ÿæˆã€‚
:::

è¦ç†è§£PDAèƒŒåçš„æ¦‚å¿µï¼Œå¯ä»¥è€ƒè™‘ä¸€ä¸‹PDAå¹¶éæŠ€æœ¯ä¸Šåˆ›é€ å‡ºæ¥çš„ï¼Œè€Œæ˜¯è¢«å‘ç°çš„ã€‚PDAæ˜¯ç”±ç§å­å’Œç¨‹åºIDçš„ç»„åˆç”Ÿæˆçš„ã€‚è¿™ä¸ªç§å­å’Œç¨‹åºIDçš„ç»„åˆä¼šé€šè¿‡sha256å“ˆå¸Œå‡½æ•°è¿è¡Œï¼Œä»¥ç¡®å®šå®ƒä»¬æ˜¯å¦ç”Ÿæˆäº†ä¸€ä¸ªä½äºed25519æ¤­åœ†æ›²çº¿ä¸Šçš„å…¬é’¥ã€‚

`find_program_address`ï¼ˆåœ¨æœ‰ç”¨é“¾æ¥ä¸­äº†è§£å¦‚ä½•ä½¿ç”¨æ­¤å‡½æ•°ï¼‰ä»`program_id`å’Œ`seeds`ï¼ˆå­—èŠ‚é›†åˆï¼‰ç¡®å®šæ€§åœ°æ´¾ç”Ÿå‡ºä¸€ä¸ªPDAã€‚

å½“ç”Ÿæˆä¸€ä¸ªPDAæ—¶ï¼Œ`findProgramAddress`å°†è¿”å›åœ°å€å’Œç”¨äºå°†åœ°å€ä»æ¤­åœ†æ›²çº¿ä¸Šç§»é™¤çš„`bump`ã€‚æœ‰äº†è¿™ä¸ª`bump`ï¼Œç¨‹åºå¯ä»¥ä¸ºéœ€è¦å…¶PDAçš„ä»»ä½•æŒ‡ä»¤è¿›è¡Œç­¾åã€‚

```rust

// A pda is a public key of an account
// A bump (one byte) is used to push a potential PDA off the ed25519 elliptic curve
let ( pda, bump_seed) = Pubkey::find_program_address(&[b"random-seed"], &program_id);
```

åˆ›å»ºä¸€ä¸ªPDAåŸºæœ¬ä¸Šæ„å‘³ç€ç”¨ç©ºé—´åˆå§‹åŒ–åœ°å€å¹¶è®¾ç½®å…¶çŠ¶æ€ã€‚ä¸€ä¸ªæ™®é€šçš„å¯†é’¥å¯¹è´¦æˆ·å¯ä»¥åœ¨æˆ‘ä»¬çš„ç¨‹åºä¹‹å¤–åˆ›å»ºï¼Œç„¶åä¼ é€’ç»™å®ƒçš„çŠ¶æ€åˆå§‹åŒ–ã€‚ä¸å¹¸çš„æ˜¯ï¼Œå¯¹äºPDAæ¥è¯´ï¼Œå®ƒæ˜¯åœ¨é“¾ä¸Šåˆ›å»ºçš„ï¼Œå› ä¸ºå®ƒæ— æ³•ä»£è¡¨è‡ªå·±ç­¾åã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨`invoke_signed`æ¥ä¼ é€’PDAçš„ç§å­ï¼Œä»¥åŠèµ„é‡‘è´¦æˆ·çš„ç­¾åï¼Œä»è€Œåˆ›å»ºä¸€ä¸ªPDAè´¦æˆ·ã€‚

è¿™ä¸ªå‡½æ•°éœ€è¦3ä¸ªå‚æ•°ğŸ‘‰:

- `instruction` - è°ƒç”¨æŒ‡ä»¤ã€‚
- `account_infos` - æ ¹æ®æŒ‡ç¤ºæ‰€éœ€çš„è´¦æˆ·ï¼Œå…¶ä¸­ä¸€ä¸ªè´¦æˆ·éœ€è¦PDAä½œä¸ºç­¾ç½²äººã€‚
- `signers_seeds` - ç”¨äºæ´¾ç”ŸPDAçš„ç§å­ã€‚

<Tabs>
<TabItem value="rust" label="Rust">

```rust
use solana_program::{
   account_info::{next_account_info, AccountInfo},
   entrypoint,
   entrypoint::ProgramResult,
   program::invoke_signed,
   pubkey::Pubkey,
   system_instruction,
   system_program,
};

entrypoint!(process_instruction);

fn process_instruction(
   program_id: &Pubkey,
   accounts: &[AccountInfo],
   instruction_data:&[u8],
) -> ProgramResult {
   let account_info_iter = &mut accounts.iter();
   let payer = next_account_info(account_info_iter)?;
   let vault_pda = next_account_info(account_info_iter)?;
   let system_program = next_account_info(account_info_iter)?;

   assert!(payer.is_writable);
   assert!(payer.is_signer);
   assert!)vault_pda.is_writable);
   assert_eq!(vault_pda.owner, &system_program::ID);
   assert!(system_program::check_id(system_program.key));

   let vault_bump_seed = instruction_data[0];
   let vault_seeds = &[b"vault", payer.key.as_ref(), &[vault_bump_seed]];
   let expected_vault_pda = Pubkey::create_program_address(vault_seeds, program_id)?;

   assert_eq!(vault_pda.key, &expected_vault_pda);

   let lamports = 10000000;
   let vault_size = 16;

   invoke_signed(
       &system_instruction::create_account&
           &payer.key,
           &vault_pda.key,
           lamports,
           vault_size,
           &program_id,
       ),
       &[
           payer.clone(),
           vault_pda.clone(),
       ],
       &[
           &[
               b"vault",
               payer.key.as_ref(),
               &[vault_bump_seed],
           ],
       ]
   )?;
   Ok(())
}
```

</TabItem>
<TabItem value="py" label="Python">

```py
def hello_world():
  print("Hello, world!")
```

</TabItem>
<TabItem value="java" label="Java">

```java
class HelloWorld {
  public static void main(String args[]) {
    System.out.println("Hello, World");
  }
}
```

</TabItem>
</Tabs>


## ç¨‹åº


### ğŸ¤“ å®šä¹‰

Solanaç¨‹åºé€šå¸¸åœ¨å…¶ä»–åŒºå—é“¾ä¸Šè¢«ç§°ä¸ºâ€œæ™ºèƒ½åˆçº¦â€ï¼Œå®ƒä»¬æ˜¯åœ¨åŒºå—é“¾ä¸Šæ¯ä¸ªäº¤æ˜“ä¸­è§£é‡Šå‘é€çš„æŒ‡ä»¤çš„å¯æ‰§è¡Œä»£ç ã€‚å®ƒä»¬å¯ä»¥ç›´æ¥éƒ¨ç½²åˆ°ç½‘ç»œçš„æ ¸å¿ƒä½œä¸ºåŸç”Ÿç¨‹åºï¼Œä¹Ÿå¯ä»¥ç”±ä»»ä½•äººå‘å¸ƒä¸ºé“¾ä¸Šç¨‹åºã€‚ç¨‹åºæ˜¯ç½‘ç»œçš„æ ¸å¿ƒæ„å»ºæ¨¡å—ï¼Œè´Ÿè´£å¤„ç†ä»é’±åŒ…ä¹‹é—´çš„ä»£å¸è½¬ç§»åˆ°æ¥å—DAOçš„æŠ•ç¥¨ï¼Œä»¥åŠè·Ÿè¸ªNFTæ‰€æœ‰æƒç­‰å„ç§åŠŸèƒ½ã€‚

è¿™ä¸¤ç§ç±»å‹çš„ç¨‹åºéƒ½è¿è¡Œåœ¨Sealevelè¿è¡Œæ—¶ä¹‹ä¸Šï¼ˆåœ¨æœ‰ç”¨é“¾æ¥ä¸­äº†è§£æ›´å¤šå…³äºSealevelçš„ä¿¡æ¯ï¼‰ï¼Œå®ƒæ˜¯Solanaçš„å¹¶è¡Œå¤„ç†æ¨¡å‹ï¼Œæœ‰åŠ©äºå®ç°åŒºå—é“¾çš„é«˜äº¤æ˜“é€Ÿåº¦ã€‚

### ğŸ“é‡ç‚¹

- ç¨‹åºæœ¬è´¨ä¸Šæ˜¯ä¸€ç§è¢«æ ‡è®°ä¸ºâ€œå¯æ‰§è¡Œâ€çš„ç‰¹æ®Šç±»å‹è´¦æˆ·ã€‚
- ç¨‹åºå¯ä»¥æ‹¥æœ‰å…¶ä»–è´¦æˆ·ã€‚
- ç¨‹åºåªèƒ½æ›´æ”¹è‡ªå·±æ‹¥æœ‰çš„æ•°æ®æˆ–å€Ÿæ–¹è´¦æˆ·ã€‚
- ä»»ä½•ç¨‹åºéƒ½å¯ä»¥è¯»å–æˆ–å‘å¦ä¸€ä¸ªè´¦æˆ·å­˜æ¬¾ã€‚
- ç¨‹åºè¢«è®¤ä¸ºæ˜¯æ— çŠ¶æ€çš„ï¼Œå› ä¸ºç¨‹åºè´¦æˆ·ä¸­å­˜å‚¨çš„ä¸»è¦æ•°æ®æ˜¯ç¼–è¯‘åçš„SBFä»£ç ã€‚
- ç¨‹åºå¯ä»¥ç”±å…¶æ‰€æœ‰è€…è¿›è¡Œå‡çº§ï¼ˆæœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§ä¸‹æ–‡ï¼‰ã€‚
- ç¨‹åºå¤„ç†æ¥è‡ªæœ€ç»ˆç”¨æˆ·å’Œå…¶ä»–ç¨‹åºçš„æŒ‡ä»¤ã€‚
- æ‰€æœ‰çš„ç¨‹åºéƒ½æ˜¯æ— çŠ¶æ€çš„ï¼šå®ƒä»¬ä¸ä¹‹äº¤äº’çš„ä»»ä½•æ•°æ®éƒ½å­˜å‚¨åœ¨é€šè¿‡æŒ‡ä»¤ä¼ é€’çš„å•ç‹¬è´¦æˆ·ä¸­ã€‚
- æ‰€æœ‰ç¨‹åºéƒ½ç”±BPF Loaderæ‹¥æœ‰å¹¶ç”±Solana Runtimeæ‰§è¡Œï¼ˆåœ¨æœ‰ç”¨é“¾æ¥ä¸­äº†è§£æ›´å¤šå…³äºSolana Runtimeçš„ä¿¡æ¯ï¼‰ã€‚
- å¼€å‘è€…æœ€å¸¸ç”¨çš„ç¼–ç¨‹è¯­è¨€æ˜¯Rustæˆ–C++ï¼Œä½†å¯ä»¥é€‰æ‹©ä»»ä½•é’ˆå¯¹LLVMçš„BPFåç«¯çš„è¯­è¨€ï¼ˆåœ¨æœ‰ç”¨é“¾æ¥ä¸­äº†è§£æ›´å¤šå…³äºBPFçš„ä¿¡æ¯ï¼‰ã€‚
- æ‰€æœ‰ç¨‹åºéƒ½æœ‰ä¸€ä¸ªå•ä¸€çš„å…¥å£ç‚¹ï¼ŒæŒ‡ä»¤å¤„ç†åœ¨æ­¤å¤„è¿›è¡Œï¼ˆå³`process_instruction`ï¼‰ï¼›å‚æ•°å§‹ç»ˆåŒ…æ‹¬ï¼š
    - `program_id`: PubKey
    - `accounts`: array account
    - `instruction_data`: byte array

### ç¨‹åºç±»å‹

SolanaåŒºå—é“¾æœ‰ä¸¤ç§ç±»å‹çš„ç¨‹åºğŸ‘‡ï¼š

- æœ¬åœ°ç¨‹åº
- é“¾ä¸Šç¨‹åº

### æœ¬åœ°ç¨‹åº

æœ¬åœ°ç¨‹åºæ˜¯ç›´æ¥æ„å»ºåœ¨SolanaåŒºå—é“¾æ ¸å¿ƒä¸­çš„ç¨‹åºã€‚

ç±»ä¼¼äºSolanaä¸­çš„â€œé“¾ä¸Šâ€ç¨‹åºï¼Œæœ¬åœ°ç¨‹åºå¯ä»¥è¢«ä»»ä½•å…¶ä»–ç¨‹åº/ç”¨æˆ·è°ƒç”¨ã€‚ç„¶è€Œï¼Œå®ƒä»¬åªèƒ½ä½œä¸ºæ ¸å¿ƒåŒºå—é“¾å’Œé›†ç¾¤æ›´æ–°çš„ä¸€éƒ¨åˆ†è¿›è¡Œå‡çº§ã€‚è¿™äº›æœ¬åœ°ç¨‹åºçš„å‡çº§æ˜¯é€šè¿‡å¯¹ä¸åŒé›†ç¾¤çš„å‘å¸ƒè¿›è¡Œæ§åˆ¶çš„ï¼ˆåœ¨æœ‰ç”¨é“¾æ¥ä¸­äº†è§£æ›´å¤šå…³äºSolanaé›†ç¾¤çš„ä¿¡æ¯ï¼‰ã€‚

æœ¬åœ°ç¨‹åºçš„ä¾‹å­åŒ…æ‹¬ğŸ‘‡ï¼š
- ç³»ç»Ÿç¨‹åºï¼šåˆ›å»ºæ–°è´¦æˆ·ï¼Œè½¬ç§»ä»£å¸ç­‰ç­‰
- BPFåŠ è½½ç¨‹åºï¼šåœ¨é“¾ä¸Šéƒ¨ç½²ã€å‡çº§å’Œæ‰§è¡Œç¨‹åº
- æŠ•ç¥¨ç¨‹åºï¼šåˆ›å»ºå’Œç®¡ç†è´¦æˆ·ï¼Œè·Ÿè¸ªéªŒè¯è€…çš„æŠ•ç¥¨çŠ¶æ€å’Œå¥–åŠ±ã€‚

### é“¾ä¸Šç¨‹åº

è¿™äº›ç”±ç”¨æˆ·ç¼–å†™çš„ç¨‹åºï¼Œåœ¨å…¶ä»–åŒºå—é“¾ä¸Šé€šå¸¸è¢«ç§°ä¸ºâ€œæ™ºèƒ½åˆçº¦â€ï¼Œç›´æ¥éƒ¨ç½²åˆ°åŒºå—é“¾ä¸Šä¾›ä»»ä½•äººè¿›è¡Œäº¤äº’å’Œæ‰§è¡Œã€‚å› æ­¤è¢«ç§°ä¸ºâ€œé“¾ä¸Šâ€ã€‚

å®é™…ä¸Šï¼Œâ€œé“¾ä¸Šç¨‹åºâ€æ˜¯æŒ‡ä»»ä½•ä¸ç›´æ¥åµŒå…¥Solanaé›†ç¾¤æ ¸å¿ƒä»£ç ä¸­çš„ç¨‹åºï¼ˆå°±åƒä¸Šé¢è®¨è®ºçš„åŸç”Ÿç¨‹åºä¸€æ ·ï¼‰ã€‚

å°½ç®¡Solana Labsç»´æŠ¤ç€è¿™äº›é“¾ä¸Šç¨‹åºçš„ä¸€ä¸ªå°å­é›†ï¼ˆç»Ÿç§°ä¸ºSolanaç¨‹åºåº“ï¼‰ï¼Œä½†ä»»ä½•äººéƒ½å¯ä»¥åˆ›å»ºæˆ–å‘å¸ƒå®ƒä»¬ã€‚è¿™äº›ç¨‹åºä¹Ÿå¯ä»¥ç”±ç›¸åº”ç¨‹åºçš„è´¦æˆ·æ‰€æœ‰è€…ç›´æ¥åœ¨åŒºå—é“¾ä¸Šè¿›è¡Œæ›´æ–°ã€‚

### å¯æ‰§è¡Œçš„

å½“Solanaç¨‹åºéƒ¨ç½²åˆ°ç½‘ç»œä¸Šæ—¶ï¼Œå®ƒä¼šè¢«BPF Loaderç¨‹åºæ ‡è®°ä¸ºâ€œå¯æ‰§è¡Œâ€ã€‚è¿™ä½¿å¾—Solanaè¿è¡Œæ—¶èƒ½å¤Ÿé«˜æ•ˆä¸”æ­£ç¡®åœ°æ‰§è¡Œç¼–è¯‘åçš„ç¨‹åºä»£ç ã€‚

### å¯å‡çº§çš„

ä¸å…¶ä»–åŒºå—é“¾ä¸åŒï¼ŒSolanaçš„ç¨‹åºåœ¨éƒ¨ç½²åˆ°ç½‘ç»œåå¯ä»¥è¿›è¡Œå‡çº§

å½“æ–°çš„è½¯ä»¶å‘å¸ƒæ—¶ï¼Œæœ¬åœ°ç¨‹åºåªèƒ½ä½œä¸ºé›†ç¾¤æ›´æ–°çš„ä¸€éƒ¨åˆ†è¿›è¡Œå‡çº§ã€‚

é“¾ä¸Šç¨‹åºå¯ä»¥é€šè¿‡è¢«æ ‡è®°ä¸ºâ€œå‡çº§æƒé™â€çš„è´¦æˆ·è¿›è¡Œå‡çº§ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œè¿™ä¸ªè´¦æˆ·/åœ°å€æ˜¯æœ€åˆéƒ¨ç½²è¯¥ç¨‹åºçš„Solanaè´¦æˆ·ã€‚

### ç¼–å†™ç¨‹åº

é€šå¸¸ä½¿ç”¨Rustæˆ–C++æ¥å¼€å‘ç¨‹åºï¼Œä½†ä¹Ÿå¯ä»¥ä½¿ç”¨ä»»ä½•é’ˆå¯¹LLVMçš„BPFåç«¯çš„è¯­è¨€è¿›è¡Œå¼€å‘ã€‚æœ€è¿‘ï¼ŒNeon Labså’ŒSolangæ¨å‡ºäº†ä¸€äº›æ–°çš„ä¸¾æªï¼Œä½¿å¾—EVMå…¼å®¹æ€§æˆä¸ºå¯èƒ½ï¼Œå¹¶å…è®¸å¼€å‘è€…ä½¿ç”¨Solidityç¼–å†™ç¨‹åºï¼ˆåœ¨æœ‰ç”¨é“¾æ¥ä¸­äº†è§£æ›´å¤šä¿¡æ¯ï¼‰ã€‚

å¤§å¤šæ•°åŸºäºRustçš„ç¨‹åºéµå¾ªä»¥ä¸‹æ¶æ„ï¼ˆæ–‡ä»¶ - æè¿°ï¼‰ğŸ‘‡ï¼š

- `lib.rs` - æ³¨å†Œæ¨¡å—
- `entrypoint.rs` - ç¨‹åºçš„å…¥å£ç‚¹
- `instruction.rs` - ç¨‹åºAPIï¼Œï¼ˆåï¼‰åºåˆ—åŒ–æŒ‡ä»¤æ•°æ®
- `processor.rs` - ç¨‹åºé€»è¾‘
- `state.rs` - ç¨‹åºå¯¹è±¡ï¼Œï¼ˆåï¼‰åºåˆ—åŒ–çŠ¶æ€
- `error.rs` - ç¨‹åºç‰¹å®šé”™è¯¯

å®é™…ä¸Šï¼Œä¸€ä¸ª`lib.rs`æ¨¡å—å°±è¶³å¤Ÿäº†ï¼Œä½†å°†ç¨‹åºæ‹†åˆ†ä¸ºä¸Šè¿°æ¨¡å—æ˜¯ä¸€ä¸ªå¥½çš„å®è·µğŸ¤“ã€‚

## è·¨ç¨‹åºè°ƒç”¨ï¼ˆCPIsï¼‰

### ğŸ¤“ å®šä¹‰

è·¨ç¨‹åºè°ƒç”¨ï¼ˆCPIï¼‰æ˜¯ä¸€ä¸ªç¨‹åºç›´æ¥è°ƒç”¨å¦ä¸€ä¸ªç¨‹åºçš„æ–¹å¼ã€‚å°±åƒä»»ä½•å®¢æˆ·ç«¯éƒ½å¯ä»¥ä½¿ç”¨JSON RPCè°ƒç”¨ä»»ä½•ç¨‹åºä¸€æ ·ï¼Œä»»ä½•ç¨‹åºéƒ½å¯ä»¥ç›´æ¥è°ƒç”¨å…¶ä»–ç¨‹åºã€‚ä»æ‚¨çš„ç¨‹åºå†…éƒ¨è°ƒç”¨å¦ä¸€ä¸ªç¨‹åºçš„å”¯ä¸€è¦æ±‚æ˜¯æ­£ç¡®æ„é€ æŒ‡ä»¤ã€‚æ‚¨å¯ä»¥å¯¹æœ¬åœ°ç¨‹åºã€æ‚¨åˆ›å»ºçš„å…¶ä»–ç¨‹åºä»¥åŠç¬¬ä¸‰æ–¹ç¨‹åºè¿›è¡ŒCPIè°ƒç”¨ã€‚

### ğŸ“é‡ç‚¹

- è·¨ç¨‹åºè°ƒç”¨ï¼ˆCPIï¼‰æ˜¯ä¸€ä¸ªç¨‹åºå¯¹å¦ä¸€ä¸ªç¨‹åºçš„è°ƒç”¨ï¼Œç›®æ ‡æ˜¯è°ƒç”¨çš„ç¨‹åºä¸Šçš„ç‰¹å®šæŒ‡ä»¤ã€‚
- CPIå…è®¸è°ƒç”¨ç¨‹åºå°†å…¶ç­¾åè€…ç‰¹æƒæ‰©å±•åˆ°è¢«è°ƒç”¨ç¨‹åºã€‚
- ç¨‹åºå¯ä»¥ä½¿ç”¨æŒ‡ä»¤ä¸­çš„`invoke`æˆ–`invoke_signed`æ¥æ‰§è¡ŒCPIã€‚
- å½“æ‰€æœ‰å¿…éœ€çš„ç­¾ååœ¨è°ƒç”¨ä¹‹å‰éƒ½æ˜¯å¯è®¿é—®çš„æ—¶ï¼Œä½¿ç”¨`invoke`ï¼Œæ— éœ€PDAså……å½“ç­¾ç½²è€…ã€‚
- åœ¨éœ€è¦è°ƒç”¨ç¨‹åºçš„PDAä½œä¸ºCPIä¸­çš„ç­¾ç½²è€…æ—¶ï¼Œä½¿ç”¨`invoke_signed`ã€‚
- åœ¨å°†ä¸€ä¸ªCPIå‘é€ç»™å¦ä¸€ä¸ªç¨‹åºåï¼Œè¢«è°ƒç”¨ç¨‹åºå¯ä»¥å‘å…¶ä»–ç¨‹åºå‘èµ·è¿›ä¸€æ­¥çš„CPIï¼Œæœ€å¤šå¯ä»¥è¾¾åˆ°4å±‚æ·±åº¦

### å¦‚ä½•åˆ¶ä½œCPI

CPIsæ˜¯ä½¿ç”¨`solana_program crate`ä¸­çš„`invoke`æˆ–`invoke_signed`å‡½æ•°åˆ›å»ºçš„ã€‚æ‚¨ä½¿ç”¨`invoke`å‡½æ•°æ¥ä¼ é€’åŸå§‹äº¤æ˜“ç­¾åï¼Œè¯¥ç­¾åå·²ä¼ é€’åˆ°æ‚¨çš„ç¨‹åºä¸­ã€‚æ‚¨ä½¿ç”¨`invoke_signed`å‡½æ•°æ¥è®©æ‚¨çš„ç¨‹åºä¸ºå…¶PDAsè¿›è¡Œâ€œç­¾åâ€ã€‚

åœ¨åˆ›å»ºä¸éœ€è¦ä»»ä½•PDAä½œä¸ºç­¾åè€…çš„CPIæ—¶ï¼Œä½¿ç”¨`invoke`å‡½æ•°ã€‚åœ¨åˆ›å»ºCPIæ—¶ï¼ŒSolanaè¿è¡Œæ—¶å°†åŸå§‹ç­¾åä¼ é€’ç»™è¢«è°ƒç”¨ç¨‹åºã€‚

è°ƒç”¨å‡½æ•°éœ€è¦2ä¸ªå‚æ•°ğŸ‘‰:

- `instruction` - è°ƒç”¨æŒ‡ä»¤ã€‚
- `account_infos` - æ ¹æ®æŒ‡ç¤ºæ‰€éœ€çš„è´¦æˆ·ã€‚

<Tabs>
<TabItem value="rust" label="Rust">

```rust
use solana_program::{
    account_info::{next_account_info, AccountInfo},
    entrypoint,
    entrypoint::ProgramResult,
    msg,
    program::invoke,
    program_error::ProgramError,
    pubkey::Pubkey,
    rent::Rent,
    system_instruction::create_account,
    sysvar::Sysvar,
};

entrypoint!(process_instruction);

// Accounts required
/// 1. [signer, writable] Payer Account
/// 2. [signer, writable] General State Account
/// 3. [] System Program
pub fn process_instruction(
    program_id: &Pubkey,
    accounts: &[AccountInfo],
    instruction_data: &[u8],
) -> ProgramResult {
    let accounts_iter = &mut accounts.iter();

    // Accounts required for token transfer

    // 1. Payer account for the state account creation
    let payer_account = next_account_info(accounts_iter)?;
    // 2. Token account we hold
    let general_state_account = next_account_info(accounts_iter))?;
    // 3. System Program
    let system_program = next_account_info(accounts_iter)?;

    msg!(
        "Creating account for {}",
        general_state_account.key.to_string()
    ))

    // Parsing the token transfer amount from instruction data
    // a. Getting the 0th to 8th index of the u8 byte array
    // b. Converting the obtained non zero u8 to a proper u8 (as little endian integers)
    // c. Converting the little endian integers to a u64 number
    let account_span = instruction_data
        .get(..8)
        .and_then(|slice| slice.try_into().ok())
        .map(u64::from_le_bytes)
        .ok_or(ProgramError::InvalidAccountData)?;

    let lamports_required = (Rent::get()?).minimum_balance(account_span as usize);

    // Creating a new TransactionInstruction
     /*
        Internal representation of the instruction's return value (Instruction)

        Instruction::new_with_bincode(
            system_program::id(), // NOT PASSED FROM USER
            &SystemInstruction::CreateAccount {
                lamports,
                space,
                owner: *owner,
            },
            account_metas,
        )
    */

    let create_account_instruction = create_account(
        &payer_account.key,
        &general_state_account.key,
        lamports_required,
        account_span,
        program_id,
    );

    let required_accounts_for_create = [
        payer_account.clone(),
        general_state_account.clone(),
        system_program.clone(),
    ];

    // Passing the TransactionInstruction to send (with the issused program_id)
    invoke(&create_account_instruction, &required_accounts_for_create)?;

    msg!("Transfer successful");

    ok(())
}
```

</TabItem>
<TabItem value="py" label="Python">

```py
def hello_world():
  print("Hello, world!")
```

</TabItem>
<TabItem value="java" label="Java">

```java
class HelloWorld {
  public static void main(String args[]) {
    System.out.println("Hello, World");
  }
}
```

</TabItem>
</Tabs>

è¦åˆ›å»ºä¸€ä¸ªéœ€è¦PDAä½œä¸ºç­¾åè€…çš„CPIï¼Œè¯·ä½¿ç”¨`invoke_signed`å‡½æ•°ï¼Œå¹¶æä¾›å¿…è¦çš„ç§å­æ¥æ´¾ç”Ÿè°ƒç”¨ç¨‹åºæ‰€éœ€çš„PDAã€‚

`invoke_signed`å‡½æ•°éœ€è¦3ä¸ªå‚æ•°ğŸ‘‰:

- `instruction` - è°ƒç”¨æŒ‡ä»¤ã€‚
- `account_info` - æ ¹æ®æŒ‡ç¤ºæ‰€éœ€çš„è´¦æˆ·ï¼Œå…¶ä¸­ä¸€ä¸ªè´¦æˆ·éœ€è¦PDAä½œä¸ºç­¾ç½²äººã€‚
- `signers_seeds` - ç”¨äºæ´¾ç”ŸPDAçš„ç§å­ã€‚

è™½ç„¶PDAæœ¬èº«æ²¡æœ‰ç§é’¥ï¼Œä½†å®ƒä»ç„¶å¯ä»¥é€šè¿‡CPIä½œä¸ºæŒ‡ä»¤çš„ç­¾åè€…ã€‚ä¸ºäº†éªŒè¯PDAæ˜¯å¦å±äºè°ƒç”¨ç¨‹åºï¼Œç”ŸæˆPDAæ‰€éœ€çš„ç§å­å¿…é¡»åŒ…å«åœ¨`signers_seeds`ä¸­ä½œä¸ºç­¾åè€…ã€‚

Solanaè¿è¡Œæ—¶å°†ä½¿ç”¨æä¾›çš„ç§å­å’Œè°ƒç”¨ç¨‹åºçš„ç¨‹åºIDå†…éƒ¨è°ƒç”¨`create_program_address`ã€‚ç„¶åå°†ç”Ÿæˆçš„PDAä¸æŒ‡ä»¤ä¸­æä¾›çš„åœ°å€è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœåŒ¹é…æˆåŠŸï¼Œåˆ™è®¤ä¸ºPDAæ˜¯æœ‰æ•ˆçš„ç­¾åè€…ã€‚

<Tabs>
<TabItem value="rust" label="Rust">

```rust
use solana_program::{
  account_info::{next_account_info, AccountInfo},
  entrypoint,
  entrypoint::ProgramResult,
  program::invoke_signed,
  pubkey::Pubkey,
  system_instruction,
  system_program,
};

entrypoint!(process_instruction);

fn process_instruction(
  program_id: &Pubkey,
  accounts: &AccountInfo],
  instruction_data: &[u8],
) -> ProgramResult {
  let account_info_iter = &mut accounts.iter();
  let payer = next_account_info(account_info_iter)?;
  let vault_pda = next_account_info(account_info_iter)?;
  let system_program = next_account_info(account_info_iter)?;

  assert!(payer.is_writable);
  assert!(payer.is_signer);
  assert!(vault_pda.is_writable);
  assert_eq!(vault_pda.owner, &system_program::ID);
  assert!(system_program::check_id(system_program.key));

  let vault_bump_seed = instruction_data[0];
  let vault_seeds = &[b"vault", payer.key.as_ref(), &[vault_bump_seed]];
  let expected_vault_pda = Pubkey::create_program_address(vault_seeds, program_id)?;

  assert_eq!(vault_pda.key, &expected_vault_pda);

  let lamports = 10000000;
  let vault_size = 16;

  invoke_signed(
      &system_instruction::create_account(
          &payer.key,
          &vault_pda.key,
          lamports,
          vault_size,
          &program_id,
      ),
      &[
          payer.clone(),
          vault_pda.clone(),
      ],
      &[
          &[
              b"vault",
              payer.key.as_ref(),
              &[vault_bump_seed],
          ],
      ]
  )?;
  ok(())
}
```

</TabItem>
<TabItem value="py" label="Python">

```py
def hello_world():
  print("Hello, world!")
```

</TabItem>
<TabItem value="java" label="Java">

```java
class HelloWorld {
  public static void main(String args[]) {
    System.out.println("Hello, World");
  }
}
```

</TabItem>
</Tabs>

### ğŸ§ éœ€è¦ç‰¹æƒçš„æŒ‡ä»¤

è¿è¡Œæ—¶ä½¿ç”¨è°ƒç”¨ç¨‹åºè¢«æˆäºˆçš„ç‰¹æƒæ¥ç¡®å®šå¯ä»¥æ‰©å±•ç»™è¢«è°ƒç”¨æ–¹çš„ç‰¹æƒã€‚åœ¨è¿™ä¸ªä¸Šä¸‹æ–‡ä¸­ï¼Œç‰¹æƒæŒ‡çš„æ˜¯ç­¾åè€…å’Œå¯å†™è´¦æˆ·ã€‚ä¾‹å¦‚ï¼Œå‡è®¾è°ƒç”¨è€…æ­£åœ¨å¤„ç†çš„æŒ‡ä»¤åŒ…å«ä¸€ä¸ªç­¾åè€…æˆ–å¯å†™è´¦æˆ·ï¼Œé‚£ä¹ˆè°ƒç”¨è€…å¯ä»¥è°ƒç”¨åŒ…å«è¯¥ç­¾åè€…å’Œ/æˆ–å¯å†™è´¦æˆ·çš„æŒ‡ä»¤ã€‚

è¿™ä¸ªç‰¹æƒæ‰©å±•ä¾èµ–äºç¨‹åºæ˜¯ä¸å¯å˜çš„äº‹å®ï¼Œé™¤éåœ¨ç¨‹åºå‡çº§çš„ç‰¹æ®Šæƒ…å†µä¸‹ã€‚

åœ¨è½¬ç§»ä»¤ç‰Œç¨‹åºçš„æƒ…å†µä¸‹ï¼Œè¿è¡Œæ—¶å¯ä»¥å®‰å…¨åœ°å°†äº¤æ˜“çš„ç­¾åè§†ä¸ºä»¤ç‰ŒæŒ‡ä»¤çš„ç­¾åã€‚å½“è¿è¡Œæ—¶çœ‹åˆ°ä»¤ç‰ŒæŒ‡ä»¤å¼•ç”¨`alice_pubkey`æ—¶ï¼Œå®ƒä¼šåœ¨`acme`æŒ‡ä»¤ä¸­æŸ¥æ‰¾è¯¥å¯†é’¥ï¼Œä»¥æŸ¥çœ‹è¯¥å¯†é’¥æ˜¯å¦å¯¹åº”äºå·²ç­¾åçš„è´¦æˆ·ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¡®å®æ˜¯è¿™æ ·ï¼Œå¹¶ä¸”æˆæƒä»¤ç‰Œç¨‹åºä¿®æ”¹Aliceçš„è´¦æˆ·ã€‚

### å¯é‡å…¥æ€§

ç›®å‰ï¼Œå¯é‡å…¥æ€§ä»…é™äºç›´æ¥è‡ªé€’å½’ï¼Œä¸”å—åˆ°å›ºå®šæ·±åº¦çš„é™åˆ¶ã€‚è¿™ä¸ªé™åˆ¶é˜²æ­¢äº†ç¨‹åºåœ¨ä¸­é—´çŠ¶æ€ä¸‹è°ƒç”¨å¦ä¸€ä¸ªç¨‹åºï¼Œè€Œä¸çŸ¥é“å®ƒå¯èƒ½ä¼šè¢«å†æ¬¡è°ƒç”¨çš„æƒ…å†µã€‚ç›´æ¥é€’å½’ä½¿å¾—ç¨‹åºåœ¨è¢«å†æ¬¡è°ƒç”¨æ—¶å®Œå…¨æŒæ§å…¶çŠ¶æ€ã€‚

## ğŸ”— æœ‰ç”¨çš„é“¾æ¥

- Solana Program Library â€“ https://spl.solana.com/

- Example of resizing an account using realloc â€“ https://solanacookbook.com/references/programs.html#how-to-change-account-size

- LLVM Project â€“ https://llvm.org/

- A Token program on the Solana blockchain â€“ https://spl.solana.com/token

- Associated Token Account Program â€“ https://spl.solana.com/associated-token-account

- Solana Explorer â€“ https://explorer.solana.com/

- Documentation of using the solana-rent command â€“ https://docs.solana.com/cli/usage#solana-rent

- A couple of words about signing transactions with programs â€“ https://docs.solana.com/developing/programming-model/calling-between-programs#program-signed-accounts

- Account Maps â€“ https://solanacookbook.com/guides/account-maps.html

- More about seeds and PDAs â€“ https://docs.rs/solana-program/latest/solana_program/pubkey/struct.Pubkey.html#method.find_program_address

- What a Sealevel is â€“ https://medium.com/solana-labs/sealevel-parallel-processing-thousands-of-smart-contracts-d814b378192

- Solana Runtime â€“
https://docs.solana.com/developing/programming-model/runtime

- What a BPF and BPF Loader is â€“ https://en.wikipedia.org/wiki/Berkeley_Packet_Filter

- What a BPF and BPF Loader is â€“ https://docs.solana.com/developing/runtime-facilities/programs#bpf-loader

- More about Clusters in Solana â€“ https://docs.solana.com/cluster/overview

- Write programs in Solidity â€“ https://neon-labs.org/

- https://solang.readthedocs.io/en/latest/

- https://ethereum.org/en/developers/docs/evm/


## æµ‹éªŒ

1. èƒ½å¦ä¿®æ”¹å¯æ‰§è¡Œè´¦æˆ·çš„å­˜å‚¨æ–¹å¼ï¼Ÿ

- a. æ˜¯çš„ï¼Œå­˜å‚¨åœ¨æ­¤è´¦æˆ·ä¸­çš„ç¨‹åºå¯ä»¥ä¿®æ”¹å…¶æ•°æ®
- b. æ˜¯çš„ï¼Œè´¦æˆ·çš„ç®¡ç†è€…å¯ä»¥ä¿®æ”¹å…¶æ•°æ®
- **c. ä¸ï¼Œå¯æ‰§è¡Œè´¦æˆ·ä¸å­˜å‚¨çŠ¶æ€ï¼Œåªå­˜å‚¨ç¨‹åºçš„ä»£ç **
- d. ä¸ï¼Œå¯æ‰§è¡Œè´¦æˆ·æ²¡æœ‰æ‰€æœ‰è€…ï¼Œå› æ­¤æ²¡æœ‰äººå¯ä»¥ä¿®æ”¹å®ƒä»¬çš„æ•°æ®ã€‚

:::info
ğŸ“è¯´æ˜ï¼š

å¯æ‰§è¡Œè´¦æˆ·çš„å­˜å‚¨åœ¨å…¶åˆ›å»ºæ—¶è¢«å®šä¹‰ï¼Œå¹¶åœ¨å…¶å­˜åœ¨æœŸé—´ä¿æŒä¸å˜ã€‚è¿™æ˜¯SolanaåŒºå—é“¾è®¾è®¡çš„ç‰¹ç‚¹ä¹‹ä¸€ï¼Œæ—¨åœ¨ç¡®ä¿äº¤æ˜“æ‰§è¡Œçš„é«˜æ€§èƒ½å’Œæ•ˆç‡ã€‚
:::

2. åœ¨è´¦æˆ·æ–¹é¢ï¼Œæƒå¨æ„å‘³ç€ä»€ä¹ˆï¼Ÿ

- a. ä¸€ä¸ªæ‹¥æœ‰è´¦æˆ·çš„ç¨‹åº
- b. æ‹¥æœ‰è´¦æˆ·ç§é’¥çš„äºº
- **c. ä¸€ä¸ªå¯ä»¥ä¸ºè´¦æˆ·æ”¯ä»˜Rentçš„é’±åŒ…**
- d. ä¸€ä¸ªæ‹¥æœ‰è´¦æˆ·çš„é’±åŒ…ã€‚

:::info
ğŸ“è¯´æ˜ï¼š

è´¦æˆ·æƒé™æ˜¯æŒ‡è´¦æˆ·å…·æœ‰æ‰§è¡Œç‰¹å®šæ“ä½œçš„æƒåˆ©å’Œèƒ½åŠ›ï¼Œä¾‹å¦‚å‘é€äº¤æ˜“ã€æ›´æ”¹è´¦æˆ·æ•°æ®æˆ–æ‰§è¡Œä¸åˆçº¦å’Œæ™ºèƒ½åˆçº¦ç›¸å…³çš„äº¤æ˜“ã€‚æƒé™ç”±é€‚å½“çš„æˆæƒå¯†é’¥çš„å¯ç”¨æ€§å’Œæ­£ç¡®ä½¿ç”¨æ¥ç¡®å®šã€‚
:::

3. è¿™æ®µä»£ç å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ

```rust
let (_, _) = solana_program::pubkey::Pubkey::find_program_address(&[b"random-seed"], &program_id);
```

- a. åŸºäºç¨‹åºåœ°å€å’Œéšæœºç§å­"random-seed"åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„PDAã€‚
- b. æ ¹æ®ç¨‹åºåœ°å€å’Œéšæœºç§å­"random-seed"æ¥æœç´¢ç°æœ‰çš„PDA
- **c. æ ¹æ®ç¨‹åºåœ°å€å’Œç§å­"random-seed"ç”Ÿæˆä¸€ä¸ªéšæœºçš„PDAåœ°å€**
- d. æ ¹æ®ç¨‹åºåœ°å€å’Œæä¾›çš„æ•°æ®ï¼Œæœç´¢ç°æœ‰çš„PDAã€‚

:::info
ğŸ“è¯´æ˜ï¼š

åœ¨ç»™å®šçš„ä»£ç ä¸­ï¼Œ`find_program_address`å‡½æ•°ç”¨äºæ ¹æ®ç¨‹åºåœ°å€`program_id`å’Œæä¾›çš„ç§å­`"random-seed"`ç”Ÿæˆä¸€ä¸ªéšæœºçš„PDAï¼ˆç¨‹åºæ´¾ç”Ÿè´¦æˆ·ï¼‰åœ°å€ã€‚ç”Ÿæˆçš„PDAåœ°å€å°†æ˜¯å”¯ä¸€çš„ï¼Œå¹¶ä¸”å–å†³äºç¨‹åºå’Œç§å­çš„ç»„åˆã€‚
:::


4. è¿™æ®µä»£ç çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ

```rust
let (expected_pda, bump_seed) = Pubkey::find_program_address(&[b"vault"], &program_id);
let actual_pda = Pubkey::create_program_address(&[b"vault", &[bump_seed]], &program_id)?;
assert_eq!(expected_pda, actual_pda);
```

- a. æ ¹æ®æä¾›çš„ç§å­å’Œç¨‹åºIDç”Ÿæˆä¸€ä¸ªç¨‹åºæ´¾ç”Ÿåœ°å€ï¼ˆPDAï¼‰ã€‚
- b. å®ƒéªŒè¯äº†æ´¾ç”Ÿçš„PDAåœ°å€ä¸é¢„æœŸçš„PDAåœ°å€æ˜¯å¦åŒ¹é…ã€‚
- c. å®ƒè®¡ç®—PDAçš„bumpç§å­å€¼ã€‚
- d. å®ƒæ£€æŸ¥äº†ç¢°æ’ç§å­å’Œç¨‹åºIDçš„ç›¸ç­‰æ€§ã€‚

:::info
 ğŸ“è§£é‡Šï¼š

åœ¨è¿™æ®µä»£ç ä¸­ï¼Œ`Pubkey::find_program_address`è¢«ç”¨æ¥æ ¹æ®ç§å­`b"vault"`å’Œç¨‹åºIDç”Ÿæˆä¸€ä¸ªåŸºäºç¨‹åºçš„æ´¾ç”Ÿåœ°å€ã€‚ç„¶åï¼Œä½¿ç”¨ç”Ÿæˆçš„`expected_pda`å’Œ`bump_seed`å€¼æ¥æ„å»ºå®é™…çš„`actual_pda`ï¼Œä½¿ç”¨`Pubkey::create_program_address`æ–¹æ³•ã€‚éšåçš„`assert_eq!`è¯­å¥ç¡®ä¿æ´¾ç”Ÿçš„`actual_pda`ä¸é¢„æœŸçš„`expected_pda`ç›¸åŒ¹é…ï¼Œä»è€ŒéªŒè¯PDAåœ°å€ç”Ÿæˆçš„æ­£ç¡®æ€§ã€‚
:::
